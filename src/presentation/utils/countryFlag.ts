const flagImages = import.meta.glob('../assets/flags/*.png', { eager: true, import: 'default' });

const flagMap: Record<string, string> = {
  '004': 'flag_afghanistan.png',
  '008': 'flag_albania.png',
  '012': 'flag_algeria.png',
  '020': 'flag_andorra.png',
  '024': 'flag_angola.png',
  '660': 'flag_anguilla.png',
  '010': 'flag_antarctica.png',
  '028': 'flag_antigua_and_barbuda.png',
  '032': 'flag_argentina.png',
  '051': 'flag_armenia.png',
  '533': 'flag_aruba.png',
  '036': 'flag_australia.png',
  '040': 'flag_austria.png',
  '031': 'flag_azerbaijan.png',
  '044': 'flag_bahamas.png',
  '048': 'flag_bahrain.png',
  '050': 'flag_bangladesh.png',
  '052': 'flag_barbados.png',
  '112': 'flag_belarus.png',
  '056': 'flag_belgium.png',
  '084': 'flag_belize.png',
  '204': 'flag_benin.png',
  '060': 'flag_bermuda.png',
  '064': 'flag_bhutan.png',
  '068': 'flag_bolivia.png',
  '070': 'flag_bosnia.png',
  '072': 'flag_botswana.png',
  '076': 'flag_brazil.png',
  '092': 'flag_british_virgin_islands.png',
  '096': 'flag_brunei.png',
  '100': 'flag_bulgaria.png',
  '854': 'flag_burkina_faso.png',
  '108': 'flag_burundi.png',
  '116': 'flag_cambodia.png',
  '120': 'flag_cameroon.png',
  '124': 'flag_canada.png',
  '132': 'flag_cape_verde.png',
  '136': 'flag_cayman_islands.png',
  '140': 'flag_central_african_republic.png',
  '148': 'flag_chad.png',
  '152': 'flag_chile.png',
  '156': 'flag_china.png',
  '170': 'flag_colombia.png',
  '174': 'flag_comoros.png',
  '178': 'flag_congo.png',
  '184': 'flag_cook_islands.png',
  '188': 'flag_costa_rica.png',
  '384': 'flag_cote_divoire.png',
  '191': 'flag_croatia.png',
  '192': 'flag_cuba.png',
  '196': 'flag_cyprus.png',
  '203': 'flag_czech_republic.png',
  '208': 'flag_denmark.png',
  '262': 'flag_djibouti.png',
  '212': 'flag_dominica.png',
  '214': 'flag_dominican_republic.png',
  '218': 'flag_ecuador.png',
  '818': 'flag_egypt.png',
  '222': 'flag_el_salvador.png',
  '226': 'flag_equatorial_guinea.png',
  '232': 'flag_eritrea.png',
  '233': 'flag_estonia.png',
  '231': 'flag_ethiopia.png',
  '238': 'flag_falkland_islands.png',
  '234': 'flag_faroe_islands.png',
  '242': 'flag_fiji.png',
  '246': 'flag_finland.png',
  '250': 'flag_france.png',
  '258': 'flag_french_polynesia.png',
  '266': 'flag_gabon.png',
  '270': 'flag_gambia.png',
  '268': 'flag_georgia.png',
  '276': 'flag_germany.png',
  '288': 'flag_ghana.png',
  '292': 'flag_gibraltar.png',
  '300': 'flag_greece.png',
  '304': 'flag_greenland.png',
  '308': 'flag_grenada.png',
  '320': 'flag_guatemala.png',
  '324': 'flag_guinea.png',
  '624': 'flag_guinea_bissau.png',
  '328': 'flag_guyana.png',
  '332': 'flag_haiti.png',
  '340': 'flag_honduras.png',
  '344': 'flag_hong_kong.png',
  '348': 'flag_hungary.png',
  '356': 'flag_india.png',
  '360': 'flag_indonesia.png',
  '364': 'flag_iran.png',
  '368': 'flag_iraq.png',
  '372': 'flag_ireland.png',
  '833': 'flag_isleof_man.png',
  '376': 'flag_israel.png',
  '380': 'flag_italy.png',
  '388': 'flag_jamaica.png',
  '392': 'flag_japan.png',
  '400': 'flag_jordan.png',
  '398': 'flag_kazakhstan.png',
  '404': 'flag_kenya.png',
  '296': 'flag_kiribati.png',
  '414': 'flag_kuwait.png',
  '417': 'flag_kyrgyzstan.png',
  '418': 'flag_laos.png',
  '428': 'flag_latvia.png',
  '422': 'flag_lebanon.png',
  '426': 'flag_lesotho.png',
  '430': 'flag_liberia.png',
  '434': 'flag_libya.png',
  '438': 'flag_liechtenstein.png',
  '440': 'flag_lithuania.png',
  '442': 'flag_luxembourg.png',
  '446': 'flag_macao.png',
  '450': 'flag_madagascar.png',
  '454': 'flag_malawi.png',
  '458': 'flag_malaysia.png',
  '462': 'flag_maldives.png',
  '466': 'flag_mali.png',
  '470': 'flag_malta.png',
  '584': 'flag_marshall_islands.png',
  '478': 'flag_mauritania.png',
  '480': 'flag_mauritius.png',
  '474': 'flag_martinique.png',
  '484': 'flag_mexico.png',
  '583': 'flag_micronesia.png',
  '498': 'flag_moldova.png',
  '492': 'flag_monaco.png',
  '496': 'flag_mongolia.png',
  '500': 'flag_montserrat.png',
  '504': 'flag_morocco.png',
  '508': 'flag_mozambique.png',
  '104': 'flag_myanmar.png',
  '516': 'flag_namibia.png',
  '520': 'flag_nauru.png',
  '524': 'flag_nepal.png',
  '528': 'flag_netherlands.png',
  '540': 'flag_new_caledonia.png',
  '554': 'flag_new_zealand.png',
  '558': 'flag_nicaragua.png',
  '562': 'flag_niger.png',
  '566': 'flag_nigeria.png',
  '570': 'flag_niue.png',
  '410': 'flag_north_korea.png',
  '578': 'flag_norway.png',
  '512': 'flag_oman.png',
  '586': 'flag_pakistan.png',
  '585': 'flag_palau.png',
  '591': 'flag_panama.png',
  '598': 'flag_papua_new_guinea.png',
  '600': 'flag_paraguay.png',
  '604': 'flag_peru.png',
  '608': 'flag_philippines.png',
  '612': 'flag_pitcairn_islands.png',
  '616': 'flag_poland.png',
  '620': 'flag_portugal.png',
  '630': 'flag_puerto_rico.png',
  '634': 'flag_qatar.png',
  '642': 'flag_romania.png',
  '643': 'flag_russian_federation.png',
  '646': 'flag_rwanda.png',
  '652': 'flag_saint_barthelemy.png',
  '654': 'flag_saint_helena.png',
  '659': 'flag_saint_kitts_and_nevis.png',
  '662': 'flag_saint_lucia.png',
  '666': 'flag_saint_pierre.png',
  '670': 'flag_saint_vicent_and_the_grenadines.png',
  '882': 'flag_samoa.png',
  '674': 'flag_san_marino.png',
  '678': 'flag_sao_tome_and_principe.png',
  '682': 'flag_saudi_arabia.png',
  '686': 'flag_senegal.png',
  '688': 'flag_serbia.png',
  '690': 'flag_seychelles.png',
  '694': 'flag_sierra_leone.png',
  '702': 'flag_singapore.png',
  '703': 'flag_slovakia.png',
  '705': 'flag_slovenia.png',
  '090': 'flag_soloman_islands.png',
  '706': 'flag_somalia.png',
  '710': 'flag_south_africa.png',
  '408': 'flag_south_korea.png',
  '728': 'flag_south_sudan.png',
  '724': 'flag_spain.png',
  '144': 'flag_sri_lanka.png',
  '729': 'flag_sudan.png',
  '740': 'flag_suriname.png',
  '752': 'flag_sweden.png',
  '756': 'flag_switzerland.png',
  '760': 'flag_syria.png',
  '158': 'flag_taiwan.png',
  '762': 'flag_tajikistan.png',
  '834': 'flag_tanzania.png',
  '764': 'flag_thailand.png',
  '768': 'flag_togo.png',
  '772': 'flag_tokelau.png',
  '776': 'flag_tonga.png',
  '788': 'flag_tunisia.png',
  '792': 'flag_turkey.png',
  '795': 'flag_turkmenistan.png',
  '796': 'flag_turks_and_caicos_islands.png',
  '798': 'flag_tuvalu.png',
  '784': 'flag_uae.png',
  '800': 'flag_uganda.png',
  '826': 'flag_united_kingdom.png',
  '804': 'flag_ukraine.png',
  '858': 'flag_uruguay.png',
  '840': 'flag_united_states_of_america.png',
  '860': 'flag_uzbekistan.png',
  '548': 'flag_vanuatu.png',
  '862': 'flag_venezuela.png',
  '704': 'flag_vietnam.png',
  '876': 'flag_wallis_and_futuna.png',
  '887': 'flag_yemen.png',
  '894': 'flag_zambia.png',
  '716': 'flag_zimbabuwe.png',
};

const defaultFlagFile = 'flag_united_nations.png';

function getFlagPath(filename: string): string {
  // Find the relative path key in flagImages that ends with the filename
  const entry = Object.entries(flagImages).find(([key]) => key.endsWith(filename));
  return entry ? entry[1] as string : '';
}

export function getFlagImage(countryCode?: string): string {
  const filename = countryCode ? flagMap[countryCode] : undefined;
  return getFlagPath(filename || defaultFlagFile) || getFlagPath(defaultFlagFile);
}
